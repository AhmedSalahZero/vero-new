import{a7 as re,am as ue,a8 as w,ak as k,a9 as E,aa as de,c as s,o as a,a as e,h as u,W as c,ab as ce,a3 as U,al as B,X as m,_ as h,t as D,Z as R,a5 as f,a6 as p,ad as me,A as J,ac as A,af as fe,ag as ve,ah as ge,ai as pe,aj as be}from"./sweetalert2.esm.all-BZlhcBbH.js";const ye={class:"row"},he={key:0,class:"col-md-12"},_e={class:"kt-portlet"},we={class:"kt-portlet__body exclude"},xe={class:"col-md-12"},ke={key:0},Fe={class:"kt-portlet"},Ve={class:"kt-portlet__body"},Re={class:"row"},De={class:"col-md-1"},Te={class:"d-flex justify-content-end"},Ce={class:"row mt-4"},Pe={class:"col-md-12 overflow-scroll"},Ee={class:"table"},je={key:0,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Le={class:"text-left d-inline-block"},Ue={key:1,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Be={class:"d-flex align-items-center",style:{gap:"10px"}},Se={class:"text-left d-inline-block"},qe=["onClick"],$e={key:0,"data-repeater-style":1},Ge={key:0},Ne={class:"d-flex flex-column align-items-center"},Me=["onClick"],Oe={key:1},Ye={class:"kt-portlet"},He={class:"kt-portlet__body"},Ke={class:"row"},Xe={class:"col-md-1"},Ze={class:"d-flex justify-content-end"},Qe={class:"row mt-4"},We={class:"col-md-12 overflow-scroll"},ze={class:"table"},Je={key:0,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Ae={class:"text-left d-inline-block"},Ie={key:1,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},et={class:"d-flex align-items-center",style:{gap:"10px"}},tt={class:"text-left d-inline-block"},lt=["onClick"],st=["data-repeater-style"],at={class:"text-center"},it=["onClick"],nt={class:"d-flex flex-column align-items-start",style:{gap:"5px"}},ot={key:0},rt={class:"d-flex flex-column align-items-center",style:{gap:"10px"}},ut={class:"min-w-percentage d-flex align-items-center flex-column"},dt=["onClick"],ct={key:1},mt={class:"d-flex mb-3"},ft={class:"col-md-6"},vt={class:"kt-portlet"},gt={class:"kt-portlet__body"},pt={class:"row"},bt={class:"col-md-1"},yt={class:"d-flex justify-content-end"},ht={class:"row mt-4"},_t={class:"col-md-12 overflow-scroll"},wt={class:"table"},xt={class:"text-left d-inline-block"},kt={key:0,"data-repeater-style":1},Ft={class:"d-flex flex-column align-items-center mt-2"},Vt=["onClick"],Rt={key:1,"data-repeater-style":1},Dt={class:"d-flex flex-column align-items-center mt-2"},Tt=["onClick"],Ct={class:"kt-portlet"},Pt={class:"kt-portlet__body"},Et={class:"row"},jt={class:"col-md-12"},Lt={class:"d-flex align-items-center justify-content-end",style:{gap:"5px"}},Ut=["disabled"],Bt={key:0,class:"spinner-border mr-2 spinner-border-sm mb-1","data-button-value":"calculate-net-disbursement",role:"status","aria-hidden":"true"},St=["innerHTML"],qt={key:0,class:"kt-portlet"},$t={class:"kt-portlet__body"},Gt={class:"row"},Nt={class:"col-md-1"},Mt={class:"d-flex justify-content-end"},Ot={class:"row mt-4"},Yt={class:"col-md-12 overflow-scroll"},Ht={class:"table"},Kt={key:0,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Xt={class:"text-left d-inline-block"},Zt={key:1,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Qt={class:"d-flex align-items-center",style:{gap:"10px"}},Wt={class:"text-left d-inline-block"},zt=["onClick"],Jt={"data-repeater-style":1},At={key:0},It={class:"d-flex flex-column align-items-center"},el={key:1},tl={"data-repeater-style":2},ll={key:0},sl={class:"d-flex min-w-percentage mx-auto mt-2 text-center flex-column align-items-center"},al=["onClick"],il={key:1},nl={"data-repeater-style":3},ol={key:0},rl={class:"d-flex flex-column align-items-center"},ul={key:1},dl={"data-repeater-style":4},cl={key:0},ml={class:"d-flex min-w-percentage mx-auto mt-3 text-center flex-column align-items-center"},fl=["onClick"],vl={key:1},gl={"data-repeater-style":5},pl={key:0},bl={class:"d-flex flex-column align-items-center mt-3"},yl={key:1},hl={class:"mt-3"},_l={class:"col-md-12"},wl={class:"d-flex align-items-center justify-content-end",style:{gap:"5px"}},xl=["disabled"],kl={key:0,class:"spinner-border mr-2 spinner-border-sm mb-1","data-button-value":"save-and-go-to-next-value",role:"status","aria-hidden":"true"},Fl=["innerHTML"],Vl={__name:"DirectFactoringComponent",emits:["loanAmountChanged"],setup(Dl,{emit:Tl}){ue((o,t,i)=>(console.error("âŒ Error captured:",o),console.error("ðŸ“ Component:",t?.$options?.name),console.error("â„¹ï¸ Info:",i),console.error("ðŸ“š Stack:",o.stack),!1));const g=w([]),b=w({directFactoringRevenueProjectionByCategoryRef:[],directFactoringBreakdownsRef:[],fundingTableRef:[]}),q=k(()=>g.value.map(o=>o.split("`").pop())),d=w([]),$=(o,t)=>{const i=d.value.indexOf(t),l=d.value[i-1]+1||0,n=b.value[o].includes(t);for(let v=l;v<=t;v++)n?b.value[o]=b.value[o].filter(_=>!(_>=l&&_<=t)):b.value[o].push(v)},I=k(()=>{const o={},t=r.value?.directFactoringBreakdowns,i=r.value?.directFactoringRevenueProjectionByCategory?.direct_factoring_transactions_projections,l=Object.keys(g.value);return Object.keys(t||{}).forEach(n=>{const v={},_=t[n].percentage_payload||[];l.forEach((y,P)=>{const ne=i[P]||0,oe=_[P]||0;v[P]=oe/100*ne}),o[n]=v,r.value.directFactoringBreakdowns[n].loan_amounts=v}),o}),ee=(o,t,i)=>{const l=r.value?.directFactoringRevenueProjectionByCategory?.direct_factoring_transactions_projections?.[t]||0;if(l===0){r.value.directFactoringBreakdowns[o].percentage_payload[t]=0;return}const n=i/l*100;r.value.directFactoringBreakdowns[o].percentage_payload[t]=Math.min(100,Math.max(0,n))},G=k(()=>({directFactoringBreakdownTotals:E.calculateTableTotals(d,r.value?.directFactoringBreakdowns,{nestedKey:"loan_amounts"}),directFactoringProjectTotals:E.calculateTableTotals(d,r.value?.directFactoringRevenueProjectionByCategory?.direct_factoring_transactions_projections,{type:"simple"}),netDisbursementTotals:E.calculateTableTotals(d,r.value?.netDisbursements,{type:"simple"})})),j=k(()=>G.value.directFactoringBreakdownTotals),L=k(()=>G.value.directFactoringProjectTotals),M=k(()=>G.value.netDisbursementTotals),C=k(()=>{if(!r.value?.equity_funding_rates||!g.value.length)return{equityFundingValues:[],equityTotals:{per_year:{},total:0},newLoansFundingRates:[],newLoansFundingValues:[],newLoansTotals:{per_year:{},total:0}};const o={equityFundingValues:[],equityTotals:{per_year:{},total:0},newLoansFundingRates:[],newLoansFundingValues:[],newLoansTotals:{per_year:{},total:0}};if(g.value.forEach((t,i)=>{const l=r.value.equity_funding_rates[i]||0,n=r.value.netDisbursements[i]||0;o.equityFundingValues[i]=n*(l/100),o.newLoansFundingRates[i]=100-l,o.newLoansFundingValues[i]=n*(o.newLoansFundingRates[i]/100)}),d.value.length){let t=0;for(const i of d.value){let l=0,n=0;for(let v=t;v<=i;v++)l+=o.equityFundingValues[v]||0,n+=o.newLoansFundingValues[v]||0;o.equityTotals.per_year[i]=l,o.newLoansTotals.per_year[i]=n,o.equityTotals.total+=l,o.newLoansTotals.total+=n,t=i+1}}return r.value.equity_funding_values=o.equityFundingValues,r.value.new_loans_funding_rates=o.newLoansFundingRates,r.value.new_loans_funding_values=o.newLoansFundingValues,o}),O=k(()=>C.value.equityFundingValues),Y=k(()=>C.value.equityTotals),H=k(()=>C.value.newLoansFundingRates),K=k(()=>C.value.newLoansFundingValues),N=k(()=>C.value.newLoansTotals),F=w(!1),te=w(!0),X=w(!1),V=w(!0),le=w(null),Z=w(null),Q=w({}),r=w(null),x=w({directFactoringProjects:!0,directFactoringBreakdown:!0,feesRates:!0,fundingStructure:!0}),T=(o,t,i)=>{E.repeatRight(o,t,i)},se=o=>{const t=W.value[o];return r.value[o].push({...t})},ae=(o,t)=>{r.value[t].splice(o,1)},W=w([]),ie=()=>{const o=document.querySelector("body"),t=o.dataset.token,i=o.dataset.baseUrl,l=o.dataset.currentCompanyId,n=o.dataset.studyId,v=o.dataset.lang,_=`${i}/${v}/${l}/non-banking-financial-services/study/${n}/direct-factoring-fetch-old-data`;A.get(_,{headers:{"X-CSRF-TOKEN":t,Accept:"application/json"}}).then(y=>{le.value=y.data.studyStartDate,W.value=y.data.empty_rows,X.value=y.data.hasEnteredDirectFactoringBreakdown,g.value=y.data.dates,d.value=y.data.lastMonthIndexInEachYear,te.value=!y.data.hasEnteredDirectFactoringBreakdown,r.value=y.data.model,Q.value=y.data.selectOptions,Z.value=y.data.submitUrl,V.value=!1}).catch(y=>{console.log(y),V.value=!1;const P=y.response?.data?.message||"An error occurred"+y;Swal.fire({icon:"error",title:"Oops...",text:P})})},z=o=>{r.value.submit_button=o.target.getAttribute("data-button-value"),console.log(o.target),F.value=!0;const i=document.querySelector("body").dataset.token;A.post(Z.value,r.value,{headers:{"X-CSRF-TOKEN":i,Accept:"application/json"}}).then(l=>{F.value=!1,Swal.fire({icon:"success",title:"Success",text:"Your data has been saved",draggable:!0,timer:2e3}).then(n=>{F.value=!1,window.location.href=l.data.redirectTo})}).catch(l=>{const n=l.response?.data?.message||"An error occurred";F.value=!1,Swal.fire({icon:"error",title:"Oops...",text:n})})};return de(()=>{ie()}),(o,t)=>(a(),s(m,null,[e("div",ye,[V.value?(a(),s("div",he,[e("div",_e,[e("div",we,[e("div",xe,[c(ce,{isLoading:V.value},null,8,["isLoading"])])])])])):u("",!0)]),V.value?u("",!0):(a(),s("div",ke,[e("div",Fe,[e("div",Ve,[e("div",Re,[t[7]||(t[7]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Direct Factoring Revenue Projection By Category [you can use the three dots to repeat within the same year] ")])],-1)),e("div",De,[e("div",Te,[e("div",{onClick:t[0]||(t[0]=i=>x.value.directFactoringProjects=!x.value.directFactoringProjects),class:"btn show-hide-style"}," Show/Hide ")])]),t[8]||(t[8]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),U(e("div",Ce,[e("div",Pe,[e("table",Ee,[e("thead",null,[e("tr",null,[t[11]||(t[11]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Item ",-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s(m,{key:l},[b.value.directFactoringRevenueProjectionByCategoryRef.includes(l)?u("",!0):(a(),s("th",je,[e("span",Le,D(i),1)])),d.value.includes(l)&&d.value.length>1?(a(),s("th",Ue,[e("div",Be,[e("span",Se,[t[9]||(t[9]=R("Total Yr. ",-1)),t[10]||(t[10]=e("br",null,null,-1)),R(" "+D(q.value[l]),1)]),e("i",{onClick:n=>$("directFactoringRevenueProjectionByCategoryRef",l),title:"Expand / Collapse",class:"cursor-pointer fa fa-expand-arrows-alt text-primary exclude-icon"},null,8,qe)])])):u("",!0)],64))),128)),t[12]||(t[12]=e("th",{class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},[e("div",{class:"d-flex flex-column align-items-center",style:{gap:"10px"}},[e("span",{class:""},[R("Total "),e("br")])])],-1))])]),e("tbody",null,[V.value?u("",!0):(a(),s("tr",$e,[t[15]||(t[15]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Direct Factoring Projection",disabled:"",class:"form-control min-width-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s(m,{key:l},[b.value.directFactoringRevenueProjectionByCategoryRef.includes(l)?u("",!0):(a(),s("td",Ge,[e("div",Ne,[c(f(p),{modelValue:r.value.directFactoringRevenueProjectionByCategory.direct_factoring_transactions_projections[l],"onUpdate:modelValue":n=>r.value.directFactoringRevenueProjectionByCategory.direct_factoring_transactions_projections[l]=n,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.directFactoringRevenueProjectionByCategory.direct_factoring_transactions_projections,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,Me)])])),d.value.includes(l)&&d.value.length>1?(a(),s("td",Oe,[c(f(p),{modelValue:L.value.subRowTotals.per_year[l],"onUpdate:modelValue":n=>L.value.subRowTotals.per_year[l]=n,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[13]||(t[13]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[c(f(p),{modelValue:L.value.subRowTotals.total,"onUpdate:modelValue":t[1]||(t[1]=i=>L.value.subRowTotals.total=i),min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"]),t[14]||(t[14]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])]))])])])],512),[[B,x.value.directFactoringProjects]])])]),e("div",Ye,[e("div",He,[e("div",Ke,[t[16]||(t[16]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Direct Factoring Breakdown ")])],-1)),e("div",Xe,[e("div",Ze,[e("div",{onClick:t[2]||(t[2]=i=>x.value.directFactoringBreakdown=!x.value.directFactoringBreakdown),class:"btn show-hide-style"}," Show/Hide ")])]),t[17]||(t[17]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),U(e("div",Qe,[e("div",We,[e("table",ze,[e("thead",null,[e("tr",null,[t[20]||(t[20]=e("th",{class:"form-label font-weight-bold text-center align-middle col-md-1 action-class"},[e("div",{class:"d-flex align-items-center justify-content-center"},[e("span",{class:""},"Ã—")])],-1)),t[21]||(t[21]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Category ",-1)),t[22]||(t[22]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down"}," Spread Rate ",-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s(m,{key:l},[b.value.directFactoringBreakdownsRef.includes(l)?u("",!0):(a(),s("th",Je,[e("span",Ae,D(i),1)])),d.value.includes(l)&&d.value.length>1?(a(),s("th",Ie,[e("div",et,[e("span",tt,[t[18]||(t[18]=R("Total Yr. ",-1)),t[19]||(t[19]=e("br",null,null,-1)),R(" "+D(q.value[l]),1)]),e("i",{onClick:n=>$("directFactoringBreakdownsRef",l),title:"Expand / Collapse",class:"cursor-pointer fa fa-expand-arrows-alt text-primary exclude-icon"},null,8,lt)])])):u("",!0)],64))),128)),t[23]||(t[23]=e("th",{class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},[e("div",{class:"d-flex flex-column align-items-center",style:{gap:"10px"}},[e("span",{class:""},[R("Total "),e("br")])])],-1))])]),e("tbody",null,[(a(!0),s(m,null,h(r.value.directFactoringBreakdowns,(i,l)=>(a(),s(m,{key:l},[V.value?u("",!0):(a(),s("tr",{key:0,"data-repeater-style":l+1},[e("td",at,[e("button",{onClick:n=>ae(l,"directFactoringBreakdowns"),type:"button",class:"btn btn-danger btn-md btn-danger-style ml-2",title:"Delete"},[...t[24]||(t[24]=[e("i",{class:"fas exclude-icon fa-trash trash-icon"},null,-1)])],8,it)]),e("td",null,[e("div",nt,[c(f(me),{filter:"",modelValue:i.category,"onUpdate:modelValue":n=>i.category=n,options:Q.value.categories,optionLabel:"title",optionValue:"id",placeholder:"",checkmark:"",highlightOnSelect:!1,class:"w-full md:w-56"},null,8,["modelValue","onUpdate:modelValue","options"]),t[25]||(t[25]=e("input",{value:"Direct Factoring Projection",disabled:"",class:"form-control min-width-300 text-left mt-2",type:"text"},null,-1))])]),e("td",null,[c(f(p),{modelValue:i.margin_rate,"onUpdate:modelValue":n=>i.margin_rate=n,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),(a(!0),s(m,null,h(g.value,(n,v)=>(a(),s(m,{key:v},[b.value.directFactoringBreakdownsRef.includes(v)?u("",!0):(a(),s("td",ot,[e("div",rt,[e("div",ut,[c(f(p),{modelValue:i.percentage_payload[v],"onUpdate:modelValue":_=>i.percentage_payload[v]=_,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:_=>T(i.percentage_payload,v,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,dt)]),c(f(p),{"model-value":I.value[l][v],"onUpdate:modelValue":_=>ee(l,v,_),min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["model-value","onUpdate:modelValue"])])])),d.value.includes(v)&&d.value.length>1?(a(),s("td",ct,[c(f(p),{modelValue:j.value.subRowTotals[l].per_year[v],"onUpdate:modelValue":_=>j.value.subRowTotals[l].per_year[v]=_,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[26]||(t[26]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[c(f(p),{modelValue:j.value.subRowTotals[l].total,"onUpdate:modelValue":n=>j.value.subRowTotals[l].total=n,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[27]||(t[27]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])],8,st))],64))),128))])]),e("div",mt,[e("div",ft,[e("input",{onClick:t[3]||(t[3]=i=>se("directFactoringBreakdowns")),type:"button",class:"btn btn-primary btn-sm text-white",value:"Add New"})])])])],512),[[B,x.value.directFactoringBreakdown]])])]),e("div",vt,[e("div",gt,[e("div",pt,[t[28]||(t[28]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Administration Fees Rate & ECL Rate ")])],-1)),e("div",bt,[e("div",yt,[e("div",{onClick:t[4]||(t[4]=i=>x.value.feesRates=!x.value.feesRates),class:"btn show-hide-style"}," Show/Hide ")])]),t[29]||(t[29]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),U(e("div",ht,[e("div",_t,[e("table",wt,[e("thead",null,[e("tr",null,[t[30]||(t[30]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Item ",-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s("th",{key:l,class:"form-label font-weight-bold text-center align-middle header-border-down"},[e("span",xt,D(i),1)]))),128))])]),e("tbody",null,[r.value.admin_fees?(a(),s("tr",kt,[t[31]||(t[31]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Administration Fees Rate",disabled:"",class:"form-control min-width-hover-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s("td",{key:l},[e("div",Ft,[c(f(p),{modelValue:r.value.admin_fees[l],"onUpdate:modelValue":n=>r.value.admin_fees[l]=n,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.admin_fees,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,Vt)])]))),128))])):u("",!0),r.value.admin_fees?(a(),s("tr",Rt,[t[32]||(t[32]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Expected Credit Loss Rate (ECL %)",disabled:"",class:"form-control min-width-hover-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s("td",{key:l},[e("div",Dt,[c(f(p),{modelValue:r.value.ecl_rates[l],"onUpdate:modelValue":n=>r.value.ecl_rates[l]=n,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.ecl_rates,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,Tt)])]))),128))])):u("",!0)])])])],512),[[B,x.value.feesRates]])])]),e("div",Ct,[e("div",Pt,[e("div",Et,[e("div",jt,[e("div",Lt,[V.value?u("",!0):(a(),s("button",{key:0,onClick:z,disabled:F.value,"data-button-value":"calculate-net-disbursement",type:"submit",class:"btn btn-danger text-white font-weight-bold"},[F.value&&r.value.submit_button=="calculate-net-disbursement"?(a(),s("span",Bt)):u("",!0),e("span",{class:"text-lg","data-button-value":"calculate-net-disbursement",innerHTML:F.value&&r.value.submit_button=="calculate-net-disbursement"?"Calculating...":"Calculate Net Disbursement"},null,8,St)],8,Ut))])])])])]),X.value?(a(),s("div",qt,[e("div",$t,[e("div",Gt,[t[33]||(t[33]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Factoring New Portfolio Funding Structure ")])],-1)),e("div",Nt,[e("div",Mt,[e("div",{onClick:t[5]||(t[5]=i=>x.value.fundingStructure=!x.value.fundingStructure),class:"btn show-hide-style"}," Show/Hide ")])]),t[34]||(t[34]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),U(e("div",Ot,[e("div",Yt,[e("table",Ht,[e("thead",null,[e("tr",null,[t[37]||(t[37]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Item ",-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s(m,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("th",Kt,[e("span",Xt,D(i),1)])),d.value.length>1&&d.value.includes(l)?(a(),s("th",Zt,[e("div",Qt,[e("span",Wt,[t[35]||(t[35]=R("Total Yr. ",-1)),t[36]||(t[36]=e("br",null,null,-1)),R(" "+D(q.value[l]),1)]),e("i",{onClick:n=>$("fundingTableRef",l),title:"Expand / Collapse",class:"cursor-pointer fa fa-expand-arrows-alt text-primary exclude-icon"},null,8,zt)])])):u("",!0)],64))),128)),t[38]||(t[38]=e("th",{class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},[e("div",{class:"d-flex flex-column align-items-center",style:{gap:"10px"}},[e("span",{class:""},[R("Total "),e("br")])])],-1))])]),e("tbody",null,[e("tr",Jt,[t[39]||(t[39]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Direct Factoring New Portfolio Amounts",disabled:"",class:"form-control min-width-hover-300 text-left mt-3",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s(m,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",At,[e("div",It,[c(f(p),{modelValue:r.value.netDisbursements[l],"onUpdate:modelValue":n=>r.value.netDisbursements[l]=n,min:0,disabled:"","input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"])])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",el,[c(f(p),{min:0,"input-class":"text-center",modelValue:M.value?.subRowTotals?.per_year?.[l],minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])):u("",!0)],64))),128)),e("td",null,[c(f(p),{min:0,"input-class":"text-center",modelValue:M.value?.subRowTotals?.total,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])]),e("tr",tl,[t[42]||(t[42]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Equity Funding Rate (%)",disabled:"",class:"form-control min-width-hover-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s(m,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",ll,[e("div",sl,[c(f(p),{modelValue:r.value.equity_funding_rates[l],"onUpdate:modelValue":n=>r.value.equity_funding_rates[l]=n,min:0,max:100,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.equity_funding_rates,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,al)])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",il,[c(f(J),{value:"-",pt:{root:{class:"text-center"}},disabled:"",fluid:""}),t[40]||(t[40]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[c(f(p),{min:0,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""}),t[41]||(t[41]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])]),e("tr",nl,[t[43]||(t[43]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Equity Funding Value",disabled:"",class:"form-control min-width-hover-300 text-left mt-3",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s(m,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",ol,[e("div",rl,[c(f(p),{modelValue:O.value[l],"onUpdate:modelValue":n=>O.value[l]=n,min:0,disabled:"","input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"])])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",ul,[c(f(p),{min:0,"input-class":"text-center",modelValue:Y.value.per_year[l],minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])):u("",!0)],64))),128)),e("td",null,[c(f(p),{min:0,"input-class":"text-center",modelValue:Y.value.total,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])]),e("tr",dl,[t[46]||(t[46]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"New Loans Funding Rate (%)",disabled:"",class:"form-control min-width-hover-300 text-left mt-3",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s(m,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",cl,[e("div",ml,[c(f(p),{modelValue:H.value[l],"onUpdate:modelValue":n=>H.value[l]=n,min:0,disabled:"","input-class":"text-center",minFractionDigits:2,maxFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.equity_funding_rates,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right",style:{visibility:"hidden"}},null,8,fl)])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",vl,[c(f(J),{value:"-",pt:{root:{class:"text-center"}},disabled:"",fluid:""}),t[44]||(t[44]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[c(f(p),{min:0,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""}),t[45]||(t[45]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])]),e("tr",gl,[t[50]||(t[50]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start mt-3"},[e("input",{value:"New Loans Funding Value",disabled:"",class:"form-control min-width-hover-300 text-left",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(m,null,h(g.value,(i,l)=>(a(),s(m,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",pl,[e("div",bl,[c(f(p),{modelValue:K.value[l],"onUpdate:modelValue":n=>K.value[l]=n,min:0,disabled:"","input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[47]||(t[47]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,-1))])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",yl,[c(f(p),{min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,modelValue:N.value.per_year[l],suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"]),t[48]||(t[48]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[e("div",hl,[c(f(p),{min:0,modelValue:N.value.total,"onUpdate:modelValue":t[6]||(t[6]=i=>N.value.total=i),"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"]),t[49]||(t[49]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])])])])])])],512),[[B,x.value.fundingStructure]])])])):u("",!0),e("div",_l,[e("div",wl,[V.value?u("",!0):(a(),s("button",{key:0,onClick:z,disabled:F.value,"data-button-value":"save-and-go-to-next-value",type:"submit",class:"btn text-white active-style save-form"},[F.value&&r.value.submit_button=="save-and-go-to-next-value"?(a(),s("span",kl)):u("",!0),e("span",{class:"text-lg","data-button-value":"save-and-go-to-next-value",innerHTML:F.value&&r.value.submit_button=="save-and-go-to-next-value"?"Saving...":"Save & Go To Next"},null,8,Fl)],8,xl))])])]))],64))}},Rl=re(Vl,[["__scopeId","data-v-c0a6694b"]]),S=fe(Rl);S.component("VueDatePicker",ve);S.config.globalProperties.$swal=ge;S.config.globalProperties.$helper=E;S.use(pe,{theme:{preset:be}}).mount("#app-direct-factoring");
