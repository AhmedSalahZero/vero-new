import{a7 as ne,am as oe,a8 as k,ak as x,a9 as j,aa as ie,c as n,o,a as e,h as d,W as m,ab as re,a3 as L,al as S,X as v,_ as b,t as T,Z as F,a5 as f,a6 as p,ad as ue,A as Q,ac as W,af as de,ag as ce,ah as me,ai as ve,aj as fe}from"./sweetalert2.esm.all-BZlhcBbH.js";const ge={class:"row"},pe={key:0,class:"col-md-12"},ye={class:"kt-portlet"},he={class:"kt-portlet__body exclude"},be={class:"col-md-12"},_e={key:0},we={class:"kt-portlet"},xe={class:"kt-portlet__body"},ke={class:"row"},Fe={class:"col-md-1"},Ve={class:"d-flex justify-content-end"},Re={class:"row mt-4"},Te={class:"col-md-12 overflow-scroll"},Ce={class:"table"},De={key:0,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Pe={class:"text-left d-inline-block"},je={key:1,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Ue={class:"d-flex align-items-center",style:{gap:"10px"}},Ee={class:"text-left d-inline-block"},Le=["onClick"],Se={key:0,"data-repeater-style":1},Be={key:0},qe={class:"d-flex flex-column align-items-center"},$e=["onClick"],Ge={key:1},Me={class:"kt-portlet"},Oe={class:"kt-portlet__body"},Ne={class:"row"},Ye={class:"col-md-1"},He={class:"d-flex justify-content-end"},Ke={class:"row mt-4"},Xe={class:"col-md-12 overflow-scroll"},Ze={class:"table"},Qe={key:0,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},We={class:"text-left d-inline-block"},ze={key:1,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Je={class:"d-flex align-items-center",style:{gap:"10px"}},Ae={class:"text-left d-inline-block"},Ie=["onClick"],et=["data-repeater-style"],tt={class:"text-center"},lt=["onClick"],st={class:"d-flex flex-column align-items-start",style:{gap:"5px"}},at={key:0},nt={class:"d-flex flex-column align-items-center",style:{gap:"10px"}},ot={class:"min-w-percentage d-flex align-items-center flex-column"},it=["onClick"],rt={key:1},ut={class:"d-flex mb-3"},dt={class:"col-md-6"},ct={class:"kt-portlet"},mt={class:"kt-portlet__body"},vt={class:"row"},ft={class:"col-md-1"},gt={class:"d-flex justify-content-end"},pt={class:"row mt-4"},yt={class:"col-md-12 overflow-scroll"},ht={class:"table"},bt={class:"text-left d-inline-block"},_t={key:0,"data-repeater-style":1},wt={class:"d-flex flex-column align-items-center mt-2"},xt=["onClick"],kt={key:1,"data-repeater-style":1},Ft={class:"d-flex flex-column align-items-center mt-2"},Vt=["onClick"],Rt={class:"kt-portlet"},Tt={class:"kt-portlet__body"},Ct={class:"row"},Dt={class:"col-md-1"},Pt={class:"d-flex justify-content-end"},jt={class:"row mt-4"},Ut={class:"col-md-12 overflow-scroll"},Et={class:"table"},Lt={key:0,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},St={class:"text-left d-inline-block"},Bt={key:1,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},qt={class:"d-flex align-items-center",style:{gap:"10px"}},$t={class:"text-left d-inline-block"},Gt=["onClick"],Mt={"data-repeater-style":2},Ot={key:0},Nt={class:"d-flex min-w-percentage mx-auto mt-2 text-center flex-column align-items-center"},Yt=["onClick"],Ht={key:1},Kt={"data-repeater-style":3},Xt={key:0},Zt={class:"d-flex flex-column align-items-center"},Qt={key:1},Wt={"data-repeater-style":4},zt={key:0},Jt={class:"d-flex min-w-percentage mx-auto mt-3 text-center flex-column align-items-center"},At=["onClick"],It={key:1},el={"data-repeater-style":5},tl={key:0},ll={class:"d-flex flex-column align-items-center mt-3"},sl={key:1},al={class:"mt-3"},nl={class:"col-md-12"},ol={class:"d-flex align-items-center justify-content-end",style:{gap:"5px"}},il=["disabled"],rl={key:0,class:"spinner-border mr-2 spinner-border-sm mb-1","data-button-value":"save-and-go-to-next-value",role:"status","aria-hidden":"true"},ul=["innerHTML"],dl={__name:"ReverseFactoringComponent",emits:["loanAmountChanged"],setup(ml,{emit:vl}){oe((i,t,s)=>(console.error("âŒ Error captured:",i),console.error("ðŸ“ Component:",t?.$options?.name),console.error("â„¹ï¸ Info:",s),console.error("ðŸ“š Stack:",i.stack),!1));const g=k([]),y=k({reverseFactoringRevenueProjectionByCategoryRef:[],reverseFactoringBreakdownsRef:[],fundingTableRef:[]}),q=x(()=>g.value.map(i=>i.split("`").pop())),u=k([]),$=(i,t)=>{const s=u.value.indexOf(t),l=u.value[s-1]+1||0,a=y.value[i].includes(t);for(let c=l;c<=t;c++)a?y.value[i]=y.value[i].filter(h=>!(h>=l&&h<=t)):y.value[i].push(c)},z=x(()=>{const i={},t=r.value?.reverseFactoringBreakdowns,s=r.value?.reverseFactoringRevenueProjectionByCategory?.reverse_factoring_transactions_projections,l=Object.keys(g.value);return Object.keys(t||{}).forEach(a=>{const c={},h=t[a].percentage_payload||[];l.forEach((w,P)=>{const se=s[P]||0,ae=h[P]||0;c[P]=ae/100*se}),i[a]=c,r.value.reverseFactoringBreakdowns[a].loan_amounts=c}),i}),J=(i,t,s)=>{const l=r.value?.reverseFactoringRevenueProjectionByCategory?.reverse_factoring_transactions_projections?.[t]||0;if(l===0){r.value.reverseFactoringBreakdowns[i].percentage_payload[t]=0;return}const a=s/l*100;r.value.reverseFactoringBreakdowns[i].percentage_payload[t]=Math.min(100,Math.max(0,a))},G=x(()=>({reverseFactoringBreakdownTotals:j.calculateTableTotals(u,r.value?.reverseFactoringBreakdowns,{nestedKey:"loan_amounts"}),reverseFactoringProjectTotals:j.calculateTableTotals(u,r.value?.reverseFactoringRevenueProjectionByCategory?.reverse_factoring_transactions_projections,{type:"simple"}),netDisbursementTotals:j.calculateTableTotals(u,r.value?.netDisbursements,{type:"simple"})})),U=x(()=>G.value.reverseFactoringBreakdownTotals),E=x(()=>G.value.reverseFactoringProjectTotals);x(()=>G.value.netDisbursementTotals);const D=x(()=>{if(!r.value?.equity_funding_rates||!g.value.length)return{equityFundingValues:[],equityTotals:{per_year:{},total:0},newLoansFundingRates:[],newLoansFundingValues:[],newLoansTotals:{per_year:{},total:0}};const i={equityFundingValues:[],equityTotals:{per_year:{},total:0},newLoansFundingRates:[],newLoansFundingValues:[],newLoansTotals:{per_year:{},total:0}};if(g.value.forEach((t,s)=>{const l=r.value.equity_funding_rates[s]||0,a=r.value.reverseFactoringRevenueProjectionByCategory.reverse_factoring_transactions_projections[s]||0;i.equityFundingValues[s]=a*(l/100),i.newLoansFundingRates[s]=100-l,i.newLoansFundingValues[s]=a*(i.newLoansFundingRates[s]/100)}),u.value.length){let t=0;for(const s of u.value){let l=0,a=0;for(let c=t;c<=s;c++)l+=i.equityFundingValues[c]||0,a+=i.newLoansFundingValues[c]||0;i.equityTotals.per_year[s]=l,i.newLoansTotals.per_year[s]=a,i.equityTotals.total+=l,i.newLoansTotals.total+=a,t=s+1}}return r.value.equity_funding_values=i.equityFundingValues,r.value.new_loans_funding_rates=i.newLoansFundingRates,r.value.new_loans_funding_values=i.newLoansFundingValues,i}),O=x(()=>D.value.equityFundingValues),N=x(()=>D.value.equityTotals),Y=x(()=>D.value.newLoansFundingRates),H=x(()=>D.value.newLoansFundingValues),M=x(()=>D.value.newLoansTotals),R=k(!1),V=k(!0),A=k(null),K=k(null),X=k({}),r=k(null),_=k({reverseFactoringProjects:!0,reverseFactoringBreakdown:!0,feesRates:!0,fundingStructure:!0}),C=(i,t,s)=>{j.repeatRight(i,t,s)},I=i=>{const t=Z.value[i];return r.value[i].push({...t})},ee=(i,t)=>{r.value[t].splice(i,1)},Z=k([]),te=()=>{const i=document.querySelector("body"),t=i.dataset.token,s=i.dataset.baseUrl,l=i.dataset.currentCompanyId,a=i.dataset.studyId,c=i.dataset.lang,h=`${s}/${c}/${l}/non-banking-financial-services/study/${a}/reverse-factoring-fetch-old-data`;W.get(h,{headers:{"X-CSRF-TOKEN":t,Accept:"application/json"}}).then(w=>{A.value=w.data.studyStartDate,Z.value=w.data.empty_rows,g.value=w.data.dates,u.value=w.data.lastMonthIndexInEachYear,r.value=w.data.model,X.value=w.data.selectOptions,K.value=w.data.submitUrl,V.value=!1}).catch(w=>{console.log(w),V.value=!1;const P=w.response?.data?.message||"An error occurred"+w;Swal.fire({icon:"error",title:"Oops...",text:P})})},le=i=>{r.value.submit_button=i.target.getAttribute("data-button-value"),console.log(i.target),R.value=!0;const s=document.querySelector("body").dataset.token;W.post(K.value,r.value,{headers:{"X-CSRF-TOKEN":s,Accept:"application/json"}}).then(l=>{R.value=!1,Swal.fire({icon:"success",title:"Success",text:"Your data has been saved",draggable:!0,timer:2e3}).then(a=>{R.value=!1,window.location.href=l.data.redirectTo})}).catch(l=>{const a=l.response?.data?.message||"An error occurred";R.value=!1,Swal.fire({icon:"error",title:"Oops...",text:a})})};return ie(()=>{te()}),(i,t)=>(o(),n(v,null,[e("div",ge,[V.value?(o(),n("div",pe,[e("div",ye,[e("div",he,[e("div",be,[m(re,{isLoading:V.value},null,8,["isLoading"])])])])])):d("",!0)]),V.value?d("",!0):(o(),n("div",_e,[e("div",we,[e("div",xe,[e("div",ke,[t[7]||(t[7]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Reverse Factoring Revenue Projection By Category [you can use the three dots to repeat within the same year] ")])],-1)),e("div",Fe,[e("div",Ve,[e("div",{onClick:t[0]||(t[0]=s=>_.value.reverseFactoringProjects=!_.value.reverseFactoringProjects),class:"btn show-hide-style"}," Show/Hide ")])]),t[8]||(t[8]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),L(e("div",Re,[e("div",Te,[e("table",Ce,[e("thead",null,[e("tr",null,[t[11]||(t[11]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Item ",-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n(v,{key:l},[y.value.reverseFactoringRevenueProjectionByCategoryRef.includes(l)?d("",!0):(o(),n("th",De,[e("span",Pe,T(s),1)])),u.value.includes(l)&&u.value.length>1?(o(),n("th",je,[e("div",Ue,[e("span",Ee,[t[9]||(t[9]=F("Total Yr. ",-1)),t[10]||(t[10]=e("br",null,null,-1)),F(" "+T(q.value[l]),1)]),e("i",{onClick:a=>$("reverseFactoringRevenueProjectionByCategoryRef",l),title:"Expand / Collapse",class:"cursor-pointer fa fa-expand-arrows-alt text-primary exclude-icon"},null,8,Le)])])):d("",!0)],64))),128)),t[12]||(t[12]=e("th",{class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},[e("div",{class:"d-flex flex-column align-items-center",style:{gap:"10px"}},[e("span",{class:""},[F("Total "),e("br")])])],-1))])]),e("tbody",null,[V.value?d("",!0):(o(),n("tr",Se,[t[15]||(t[15]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Reverse Factoring Projection",disabled:"",class:"form-control min-width-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n(v,{key:l},[y.value.reverseFactoringRevenueProjectionByCategoryRef.includes(l)?d("",!0):(o(),n("td",Be,[e("div",qe,[m(f(p),{modelValue:r.value.reverseFactoringRevenueProjectionByCategory.reverse_factoring_transactions_projections[l],"onUpdate:modelValue":a=>r.value.reverseFactoringRevenueProjectionByCategory.reverse_factoring_transactions_projections[l]=a,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:a=>C(r.value.reverseFactoringRevenueProjectionByCategory.reverse_factoring_transactions_projections,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,$e)])])),u.value.includes(l)&&u.value.length>1?(o(),n("td",Ge,[m(f(p),{modelValue:E.value.subRowTotals.per_year[l],"onUpdate:modelValue":a=>E.value.subRowTotals.per_year[l]=a,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[13]||(t[13]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):d("",!0)],64))),128)),e("td",null,[m(f(p),{modelValue:E.value.subRowTotals.total,"onUpdate:modelValue":t[1]||(t[1]=s=>E.value.subRowTotals.total=s),min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"]),t[14]||(t[14]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])]))])])])],512),[[S,_.value.reverseFactoringProjects]])])]),e("div",Me,[e("div",Oe,[e("div",Ne,[t[16]||(t[16]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Reverse Factoring Breakdown ")])],-1)),e("div",Ye,[e("div",He,[e("div",{onClick:t[2]||(t[2]=s=>_.value.reverseFactoringBreakdown=!_.value.reverseFactoringBreakdown),class:"btn show-hide-style"}," Show/Hide ")])]),t[17]||(t[17]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),L(e("div",Ke,[e("div",Xe,[e("table",Ze,[e("thead",null,[e("tr",null,[t[20]||(t[20]=e("th",{class:"form-label font-weight-bold text-center align-middle col-md-1 action-class"},[e("div",{class:"d-flex align-items-center justify-content-center"},[e("span",{class:""},"Ã—")])],-1)),t[21]||(t[21]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Category ",-1)),t[22]||(t[22]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down"},[F(" Tenor "),e("br"),F(" (Months) ")],-1)),t[23]||(t[23]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down"}," Spread Rate ",-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n(v,{key:l},[y.value.reverseFactoringBreakdownsRef.includes(l)?d("",!0):(o(),n("th",Qe,[e("span",We,T(s),1)])),u.value.includes(l)&&u.value.length>1?(o(),n("th",ze,[e("div",Je,[e("span",Ae,[t[18]||(t[18]=F("Total Yr. ",-1)),t[19]||(t[19]=e("br",null,null,-1)),F(" "+T(q.value[l]),1)]),e("i",{onClick:a=>$("reverseFactoringBreakdownsRef",l),title:"Expand / Collapse",class:"cursor-pointer fa fa-expand-arrows-alt text-primary exclude-icon"},null,8,Ie)])])):d("",!0)],64))),128)),t[24]||(t[24]=e("th",{class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},[e("div",{class:"d-flex flex-column align-items-center",style:{gap:"10px"}},[e("span",{class:""},[F("Total "),e("br")])])],-1))])]),e("tbody",null,[(o(!0),n(v,null,b(r.value.reverseFactoringBreakdowns,(s,l)=>(o(),n(v,{key:l},[V.value?d("",!0):(o(),n("tr",{key:0,"data-repeater-style":l+1},[e("td",tt,[e("button",{onClick:a=>ee(l,"reverseFactoringBreakdowns"),type:"button",class:"btn btn-danger btn-md btn-danger-style ml-2",title:"Delete"},[...t[25]||(t[25]=[e("i",{class:"fas exclude-icon fa-trash trash-icon"},null,-1)])],8,lt)]),e("td",null,[e("div",st,[m(f(ue),{filter:"",modelValue:s.category,"onUpdate:modelValue":a=>s.category=a,options:X.value.categories,optionLabel:"title",optionValue:"id",placeholder:"",checkmark:"",highlightOnSelect:!1,class:"w-full md:w-56"},null,8,["modelValue","onUpdate:modelValue","options"]),t[26]||(t[26]=e("input",{value:"Reverse Factoring Projection",disabled:"",class:"form-control min-width-300 text-left mt-2",type:"text"},null,-1))])]),e("td",null,[m(f(p),{modelValue:s.tenor,"onUpdate:modelValue":a=>s.tenor=a,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:0,suffix:" Mth",fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,[m(f(p),{modelValue:s.margin_rate,"onUpdate:modelValue":a=>s.margin_rate=a,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),(o(!0),n(v,null,b(g.value,(a,c)=>(o(),n(v,{key:c},[y.value.reverseFactoringBreakdownsRef.includes(c)?d("",!0):(o(),n("td",at,[e("div",nt,[e("div",ot,[m(f(p),{modelValue:s.percentage_payload[c],"onUpdate:modelValue":h=>s.percentage_payload[c]=h,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:h=>C(s.percentage_payload,c,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,it)]),m(f(p),{"model-value":z.value[l][c],"onUpdate:modelValue":h=>J(l,c,h),min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["model-value","onUpdate:modelValue"])])])),u.value.includes(c)&&u.value.length>1?(o(),n("td",rt,[m(f(p),{modelValue:U.value.subRowTotals[l].per_year[c],"onUpdate:modelValue":h=>U.value.subRowTotals[l].per_year[c]=h,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[27]||(t[27]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):d("",!0)],64))),128)),e("td",null,[m(f(p),{modelValue:U.value.subRowTotals[l].total,"onUpdate:modelValue":a=>U.value.subRowTotals[l].total=a,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[28]||(t[28]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])],8,et))],64))),128))])]),e("div",ut,[e("div",dt,[e("input",{onClick:t[3]||(t[3]=s=>I("reverseFactoringBreakdowns")),type:"button",class:"btn btn-primary btn-sm text-white",value:"Add New"})])])])],512),[[S,_.value.reverseFactoringBreakdown]])])]),e("div",ct,[e("div",mt,[e("div",vt,[t[29]||(t[29]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Administration Fees Rate & ECL Rate ")])],-1)),e("div",ft,[e("div",gt,[e("div",{onClick:t[4]||(t[4]=s=>_.value.feesRates=!_.value.feesRates),class:"btn show-hide-style"}," Show/Hide ")])]),t[30]||(t[30]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),L(e("div",pt,[e("div",yt,[e("table",ht,[e("thead",null,[e("tr",null,[t[31]||(t[31]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Item ",-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n("th",{key:l,class:"form-label font-weight-bold text-center align-middle header-border-down"},[e("span",bt,T(s),1)]))),128))])]),e("tbody",null,[r.value.admin_fees?(o(),n("tr",_t,[t[32]||(t[32]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Administration Fees Rate",disabled:"",class:"form-control min-width-hover-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n("td",{key:l},[e("div",wt,[m(f(p),{modelValue:r.value.admin_fees[l],"onUpdate:modelValue":a=>r.value.admin_fees[l]=a,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:a=>C(r.value.admin_fees,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,xt)])]))),128))])):d("",!0),r.value.admin_fees?(o(),n("tr",kt,[t[33]||(t[33]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Expected Credit Loss Rate (ECL %)",disabled:"",class:"form-control min-width-hover-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n("td",{key:l},[e("div",Ft,[m(f(p),{modelValue:r.value.ecl_rates[l],"onUpdate:modelValue":a=>r.value.ecl_rates[l]=a,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:a=>C(r.value.ecl_rates,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,Vt)])]))),128))])):d("",!0)])])])],512),[[S,_.value.feesRates]])])]),e("div",Rt,[e("div",Tt,[e("div",Ct,[t[34]||(t[34]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Factoring New Portfolio Funding Structure ")])],-1)),e("div",Dt,[e("div",Pt,[e("div",{onClick:t[5]||(t[5]=s=>_.value.fundingStructure=!_.value.fundingStructure),class:"btn show-hide-style"}," Show/Hide ")])]),t[35]||(t[35]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),L(e("div",jt,[e("div",Ut,[e("table",Et,[e("thead",null,[e("tr",null,[t[38]||(t[38]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Item ",-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n(v,{key:l},[y.value.fundingTableRef.includes(l)?d("",!0):(o(),n("th",Lt,[e("span",St,T(s),1)])),u.value.length>1&&u.value.includes(l)?(o(),n("th",Bt,[e("div",qt,[e("span",$t,[t[36]||(t[36]=F("Total Yr. ",-1)),t[37]||(t[37]=e("br",null,null,-1)),F(" "+T(q.value[l]),1)]),e("i",{onClick:a=>$("fundingTableRef",l),title:"Expand / Collapse",class:"cursor-pointer fa fa-expand-arrows-alt text-primary exclude-icon"},null,8,Gt)])])):d("",!0)],64))),128)),t[39]||(t[39]=e("th",{class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},[e("div",{class:"d-flex flex-column align-items-center",style:{gap:"10px"}},[e("span",{class:""},[F("Total "),e("br")])])],-1))])]),e("tbody",null,[e("tr",Mt,[t[42]||(t[42]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Equity Funding Rate (%)",disabled:"",class:"form-control min-width-hover-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n(v,{key:l},[y.value.fundingTableRef.includes(l)?d("",!0):(o(),n("td",Ot,[e("div",Nt,[m(f(p),{modelValue:r.value.equity_funding_rates[l],"onUpdate:modelValue":a=>r.value.equity_funding_rates[l]=a,min:0,max:100,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:a=>C(r.value.equity_funding_rates,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,Yt)])])),u.value.length>1&&u.value.includes(l)?(o(),n("td",Ht,[m(f(Q),{value:"-",pt:{root:{class:"text-center"}},disabled:"",fluid:""}),t[40]||(t[40]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):d("",!0)],64))),128)),e("td",null,[m(f(p),{min:0,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""}),t[41]||(t[41]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])]),e("tr",Kt,[t[43]||(t[43]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Equity Funding Value",disabled:"",class:"form-control min-width-hover-300 text-left mt-3",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n(v,{key:l},[y.value.fundingTableRef.includes(l)?d("",!0):(o(),n("td",Xt,[e("div",Zt,[m(f(p),{modelValue:O.value[l],"onUpdate:modelValue":a=>O.value[l]=a,min:0,disabled:"","input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"])])])),u.value.length>1&&u.value.includes(l)?(o(),n("td",Qt,[m(f(p),{min:0,"input-class":"text-center",modelValue:N.value.per_year[l],minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])):d("",!0)],64))),128)),e("td",null,[m(f(p),{min:0,"input-class":"text-center",modelValue:N.value.total,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])]),e("tr",Wt,[t[46]||(t[46]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"New Loans Funding Rate (%)",disabled:"",class:"form-control min-width-hover-300 text-left mt-3",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n(v,{key:l},[y.value.fundingTableRef.includes(l)?d("",!0):(o(),n("td",zt,[e("div",Jt,[m(f(p),{modelValue:Y.value[l],"onUpdate:modelValue":a=>Y.value[l]=a,min:0,disabled:"","input-class":"text-center",minFractionDigits:2,maxFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:a=>C(r.value.equity_funding_rates,l,g.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right",style:{visibility:"hidden"}},null,8,At)])])),u.value.length>1&&u.value.includes(l)?(o(),n("td",It,[m(f(Q),{value:"-",pt:{root:{class:"text-center"}},disabled:"",fluid:""}),t[44]||(t[44]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):d("",!0)],64))),128)),e("td",null,[m(f(p),{min:0,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""}),t[45]||(t[45]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])]),e("tr",el,[t[50]||(t[50]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start mt-3"},[e("input",{value:"New Loans Funding Value",disabled:"",class:"form-control min-width-hover-300 text-left",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(o(!0),n(v,null,b(g.value,(s,l)=>(o(),n(v,{key:l},[y.value.fundingTableRef.includes(l)?d("",!0):(o(),n("td",tl,[e("div",ll,[m(f(p),{modelValue:H.value[l],"onUpdate:modelValue":a=>H.value[l]=a,min:0,disabled:"","input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[47]||(t[47]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,-1))])])),u.value.length>1&&u.value.includes(l)?(o(),n("td",sl,[m(f(p),{min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,modelValue:M.value.per_year[l],suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"]),t[48]||(t[48]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):d("",!0)],64))),128)),e("td",null,[e("div",al,[m(f(p),{min:0,modelValue:M.value.total,"onUpdate:modelValue":t[6]||(t[6]=s=>M.value.total=s),"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"]),t[49]||(t[49]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])])])])])])],512),[[S,_.value.fundingStructure]])])]),e("div",nl,[e("div",ol,[V.value?d("",!0):(o(),n("button",{key:0,onClick:le,disabled:R.value,"data-button-value":"save-and-go-to-next-value",type:"submit",class:"btn text-white active-style save-form"},[R.value&&r.value.submit_button=="save-and-go-to-next-value"?(o(),n("span",rl)):d("",!0),e("span",{class:"text-lg","data-button-value":"save-and-go-to-next-value",innerHTML:R.value&&r.value.submit_button=="save-and-go-to-next-value"?"Saving...":"Save & Go To Next"},null,8,ul)],8,il))])])]))],64))}},cl=ne(dl,[["__scopeId","data-v-40dbc897"]]),B=de(cl);B.component("VueDatePicker",ce);B.config.globalProperties.$swal=me;B.config.globalProperties.$helper=j;B.use(ve,{theme:{preset:fe}}).mount("#app-reverse-factoring");
