import{a4 as oe,al as re,a5 as _,aj as w,a6 as E,a7 as ue,c as s,h as u,o as a,a as e,a3 as L,ak as S,X as f,_ as h,t as D,Z as V,W as c,a9 as m,ab as g,aa as de,A as J,a8 as A,ae as ce,af as me,ag as fe,ah as ve,ai as pe}from"./sweetalert2.esm.all-DNSgMTmu.js";const ge={key:0},be={class:"kt-portlet"},ye={class:"kt-portlet__body"},he={class:"row"},_e={class:"col-md-1"},we={class:"d-flex justify-content-end"},xe={class:"row mt-4"},ke={class:"col-md-12 overflow-scroll"},Fe={class:"table"},Ve={key:0,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Re={class:"text-left d-inline-block"},De={key:1,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Te={class:"d-flex align-items-center",style:{gap:"10px"}},Ce={class:"text-left d-inline-block"},Pe=["onClick"],Ee={key:0,"data-repeater-style":1},je={key:0},Ue={class:"d-flex flex-column align-items-center"},Le=["onClick"],Se={key:1},Be={class:"kt-portlet"},qe={class:"kt-portlet__body"},$e={class:"row"},Ge={class:"col-md-1"},Ne={class:"d-flex justify-content-end"},Oe={class:"row mt-4"},Me={class:"col-md-12 overflow-scroll"},He={class:"table"},Ye={key:0,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Ke={class:"text-left d-inline-block"},Xe={key:1,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Ze={class:"d-flex align-items-center",style:{gap:"10px"}},Qe={class:"text-left d-inline-block"},We=["onClick"],ze=["data-repeater-style"],Je={class:"text-center"},Ae=["onClick"],Ie={class:"d-flex flex-column align-items-start",style:{gap:"5px"}},et={key:0},tt={class:"d-flex flex-column align-items-center",style:{gap:"10px"}},lt={class:"min-w-percentage d-flex align-items-center flex-column"},st=["onClick"],at={key:1},it={class:"d-flex mb-3"},nt={class:"col-md-6"},ot={class:"kt-portlet"},rt={class:"kt-portlet__body"},ut={class:"row"},dt={class:"col-md-1"},ct={class:"d-flex justify-content-end"},mt={class:"row mt-4"},ft={class:"col-md-12 overflow-scroll"},vt={class:"table"},pt={class:"text-left d-inline-block"},gt={key:0,"data-repeater-style":1},bt={class:"d-flex flex-column align-items-center mt-2"},yt=["onClick"],ht={key:1,"data-repeater-style":1},_t={class:"d-flex flex-column align-items-center mt-2"},wt=["onClick"],xt={class:"kt-portlet"},kt={class:"kt-portlet__body"},Ft={class:"row"},Vt={class:"col-md-12"},Rt={class:"d-flex align-items-center justify-content-end",style:{gap:"5px"}},Dt=["disabled"],Tt={key:0,class:"spinner-border mr-2 spinner-border-sm mb-1","data-button-value":"calculate-net-disbursement",role:"status","aria-hidden":"true"},Ct=["innerHTML"],Pt={key:0,class:"kt-portlet"},Et={class:"kt-portlet__body"},jt={class:"row"},Ut={class:"col-md-1"},Lt={class:"d-flex justify-content-end"},St={class:"row mt-4"},Bt={class:"col-md-12 overflow-scroll"},qt={class:"table"},$t={key:0,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Gt={class:"text-left d-inline-block"},Nt={key:1,class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},Ot={class:"d-flex align-items-center",style:{gap:"10px"}},Mt={class:"text-left d-inline-block"},Ht=["onClick"],Yt={"data-repeater-style":1},Kt={key:0},Xt={class:"d-flex flex-column align-items-center"},Zt={key:1},Qt={"data-repeater-style":2},Wt={key:0},zt={class:"d-flex min-w-percentage mx-auto mt-2 text-center flex-column align-items-center"},Jt=["onClick"],At={key:1},It={"data-repeater-style":3},el={key:0},tl={class:"d-flex flex-column align-items-center"},ll={key:1},sl={"data-repeater-style":4},al={key:0},il={class:"d-flex min-w-percentage mx-auto mt-3 text-center flex-column align-items-center"},nl=["onClick"],ol={key:1},rl={"data-repeater-style":5},ul={key:0},dl={class:"d-flex flex-column align-items-center mt-3"},cl={key:1},ml={class:"mt-3"},fl={class:"col-md-12"},vl={class:"d-flex align-items-center justify-content-end",style:{gap:"5px"}},pl=["disabled"],gl={key:0,class:"spinner-border mr-2 spinner-border-sm mb-1","data-button-value":"save-and-go-to-next-value",role:"status","aria-hidden":"true"},bl=["innerHTML"],yl={__name:"DirectFactoringComponent",emits:["loanAmountChanged"],setup(_l,{emit:wl}){re((o,t,i)=>(console.error("âŒ Error captured:",o),console.error("ðŸ“ Component:",t?.$options?.name),console.error("â„¹ï¸ Info:",i),console.error("ðŸ“š Stack:",o.stack),!1));const v=_([]),b=_({directFactoringRevenueProjectionByCategoryRef:[],directFactoringBreakdownsRef:[],fundingTableRef:[]}),q=w(()=>v.value.map(o=>o.split("`").pop())),d=_([]),$=(o,t)=>{const i=d.value.indexOf(t),l=d.value[i-1]+1||0,n=b.value[o].includes(t);for(let p=l;p<=t;p++)n?b.value[o]=b.value[o].filter(k=>!(k>=l&&k<=t)):b.value[o].push(p)},I=w(()=>{const o={},t=r.value.directFactoringBreakdowns,i=r.value.directFactoringRevenueProjectionByCategory.direct_factoring_transactions_projections,l=Object.keys(v.value);return Object.keys(t).forEach(n=>{const p={},k=t[n].percentage_payload||[];l.forEach((y,P)=>{const ie=i[P]||0,ne=k[P]||0;p[P]=ne/100*ie}),o[n]=p,r.value.directFactoringBreakdowns[n].loan_amounts=p}),o}),G=w(()=>({directFactoringBreakdownTotals:E.calculateTableTotals(d,r.value?.directFactoringBreakdowns,{nestedKey:"loan_amounts"}),directFactoringProjectTotals:E.calculateTableTotals(d,r.value?.directFactoringRevenueProjectionByCategory?.direct_factoring_transactions_projections,{type:"simple"}),netDisbursementTotals:E.calculateTableTotals(d,r.value?.netDisbursements,{type:"simple"})})),j=w(()=>G.value.directFactoringBreakdownTotals),U=w(()=>G.value.directFactoringProjectTotals),O=w(()=>G.value.netDisbursementTotals);w(()=>[]);const C=w(()=>{if(!r.value?.equity_funding_rates||!v.value.length)return{equityFundingValues:[],equityTotals:{per_year:{},total:0},newLoansFundingRates:[],newLoansFundingValues:[],newLoansTotals:{per_year:{},total:0}};const o={equityFundingValues:[],equityTotals:{per_year:{},total:0},newLoansFundingRates:[],newLoansFundingValues:[],newLoansTotals:{per_year:{},total:0}};if(v.value.forEach((t,i)=>{const l=r.value.equity_funding_rates[i]||0,n=r.value.netDisbursements[i]||0;o.equityFundingValues[i]=n*(l/100),o.newLoansFundingRates[i]=100-l,o.newLoansFundingValues[i]=n*(o.newLoansFundingRates[i]/100)}),d.value.length){let t=0;for(const i of d.value){let l=0,n=0;for(let p=t;p<=i;p++)l+=o.equityFundingValues[p]||0,n+=o.newLoansFundingValues[p]||0;o.equityTotals.per_year[i]=l,o.newLoansTotals.per_year[i]=n,o.equityTotals.total+=l,o.newLoansTotals.total+=n,t=i+1}}return r.value.equity_funding_values=o.equityFundingValues,r.value.new_loans_funding_rates=o.newLoansFundingRates,r.value.new_loans_funding_values=o.newLoansFundingValues,o}),M=w(()=>C.value.equityFundingValues),H=w(()=>C.value.equityTotals),Y=w(()=>C.value.newLoansFundingRates),K=w(()=>C.value.newLoansFundingValues),N=w(()=>C.value.newLoansTotals),F=_(!1),ee=_(!0),X=_(!1),R=_(!0),te=_(null),Z=_(null),Q=_({}),r=_(null),x=_({directFactoringProjects:!0,directFactoringBreakdown:!0,feesRates:!0,fundingStructure:!0}),T=(o,t,i)=>{E.repeatRight(o,t,i)},le=o=>{const t=W.value[o];return r.value[o].push({...t})},se=(o,t)=>{r.value[t].splice(o,1)},W=_([]),ae=()=>{const o=document.querySelector("body"),t=o.dataset.token,i=o.dataset.baseUrl,l=o.dataset.currentCompanyId,n=o.dataset.studyId,p=o.dataset.lang,k=`${i}/${p}/${l}/non-banking-financial-services/study/${n}/direct-factoring-fetch-old-data`;A.get(k,{headers:{"X-CSRF-TOKEN":t,Accept:"application/json"}}).then(y=>{te.value=y.data.studyStartDate,W.value=y.data.empty_rows,X.value=y.data.hasEnteredRevenueStreamBreakdown,v.value=y.data.dates,d.value=y.data.lastMonthIndexInEachYear,ee.value=!y.data.hasEnteredRevenueStreamBreakdown,r.value=y.data.model,Q.value=y.data.selectOptions,Z.value=y.data.submitUrl,R.value=!1}).catch(y=>{console.log(y),R.value=!1;const P=y.response?.data?.message||"An error occurred"+y;Swal.fire({icon:"error",title:"Oops...",text:P})})},z=o=>{r.value.submit_button=o.target.getAttribute("data-button-value"),console.log(o.target),F.value=!0;const i=document.querySelector("body").dataset.token;A.post(Z.value,r.value,{headers:{"X-CSRF-TOKEN":i,Accept:"application/json"}}).then(l=>{F.value=!1,window.location.href=l.data.redirectTo}).catch(l=>{const n=l.response?.data?.message||"An error occurred";F.value=!1,Swal.fire({icon:"error",title:"Oops...",text:n})})};return ue(()=>{ae()}),(o,t)=>R.value?u("",!0):(a(),s("div",ge,[e("div",be,[e("div",ye,[e("div",he,[t[7]||(t[7]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Direct Factoring Revenue Projection By Category [you can use the three dots to repeat within the same year] ")])],-1)),e("div",_e,[e("div",we,[e("div",{onClick:t[0]||(t[0]=i=>x.value.directFactoringProjects=!x.value.directFactoringProjects),class:"btn show-hide-style"}," Show/Hide ")])]),t[8]||(t[8]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),L(e("div",xe,[e("div",ke,[e("table",Fe,[e("thead",null,[e("tr",null,[t[11]||(t[11]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Item ",-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s(f,{key:l},[b.value.directFactoringRevenueProjectionByCategoryRef.includes(l)?u("",!0):(a(),s("th",Ve,[e("span",Re,D(i),1)])),d.value.includes(l)&&d.value.length>1?(a(),s("th",De,[e("div",Te,[e("span",Ce,[t[9]||(t[9]=V("Total Yr. ",-1)),t[10]||(t[10]=e("br",null,null,-1)),V(" "+D(q.value[l]),1)]),e("i",{onClick:n=>$("directFactoringRevenueProjectionByCategoryRef",l),title:"Expand / Collapse",class:"cursor-pointer fa fa-expand-arrows-alt text-primary exclude-icon"},null,8,Pe)])])):u("",!0)],64))),128)),t[12]||(t[12]=e("th",{class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},[e("div",{class:"d-flex flex-column align-items-center",style:{gap:"10px"}},[e("span",{class:""},[V("Total "),e("br")])])],-1))])]),e("tbody",null,[R.value?u("",!0):(a(),s("tr",Ee,[t[15]||(t[15]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Direct Factoring Projection",disabled:"",class:"form-control min-width-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s(f,{key:l},[b.value.directFactoringRevenueProjectionByCategoryRef.includes(l)?u("",!0):(a(),s("td",je,[e("div",Ue,[c(m(g),{modelValue:r.value.directFactoringRevenueProjectionByCategory.direct_factoring_transactions_projections[l],"onUpdate:modelValue":n=>r.value.directFactoringRevenueProjectionByCategory.direct_factoring_transactions_projections[l]=n,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.directFactoringRevenueProjectionByCategory.direct_factoring_transactions_projections,l,v.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,Le)])])),d.value.includes(l)&&d.value.length>1?(a(),s("td",Se,[c(m(g),{modelValue:U.value.subRowTotals.per_year[l],"onUpdate:modelValue":n=>U.value.subRowTotals.per_year[l]=n,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[13]||(t[13]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[c(m(g),{modelValue:U.value.subRowTotals.total,"onUpdate:modelValue":t[1]||(t[1]=i=>U.value.subRowTotals.total=i),min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"]),t[14]||(t[14]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])]))])])])],512),[[S,x.value.directFactoringProjects]])])]),e("div",Be,[e("div",qe,[e("div",$e,[t[16]||(t[16]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Direct Factoring Breakdown ")])],-1)),e("div",Ge,[e("div",Ne,[e("div",{onClick:t[2]||(t[2]=i=>x.value.directFactoringBreakdown=!x.value.directFactoringBreakdown),class:"btn show-hide-style"}," Show/Hide ")])]),t[17]||(t[17]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),L(e("div",Oe,[e("div",Me,[e("table",He,[e("thead",null,[e("tr",null,[t[20]||(t[20]=e("th",{class:"form-label font-weight-bold text-center align-middle col-md-1 action-class"},[e("div",{class:"d-flex align-items-center justify-content-center"},[e("span",{class:""},"Ã—")])],-1)),t[21]||(t[21]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Category ",-1)),t[22]||(t[22]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down"}," Spread Rate ",-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s(f,{key:l},[b.value.directFactoringBreakdownsRef.includes(l)?u("",!0):(a(),s("th",Ye,[e("span",Ke,D(i),1)])),d.value.includes(l)&&d.value.length>1?(a(),s("th",Xe,[e("div",Ze,[e("span",Qe,[t[18]||(t[18]=V("Total Yr. ",-1)),t[19]||(t[19]=e("br",null,null,-1)),V(" "+D(q.value[l]),1)]),e("i",{onClick:n=>$("directFactoringBreakdownsRef",l),title:"Expand / Collapse",class:"cursor-pointer fa fa-expand-arrows-alt text-primary exclude-icon"},null,8,We)])])):u("",!0)],64))),128)),t[23]||(t[23]=e("th",{class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},[e("div",{class:"d-flex flex-column align-items-center",style:{gap:"10px"}},[e("span",{class:""},[V("Total "),e("br")])])],-1))])]),e("tbody",null,[(a(!0),s(f,null,h(r.value.directFactoringBreakdowns,(i,l)=>(a(),s(f,{key:l},[R.value?u("",!0):(a(),s("tr",{key:0,"data-repeater-style":l+1},[e("td",Je,[e("button",{onClick:n=>se(l,"directFactoringBreakdowns"),type:"button",class:"btn btn-danger btn-md btn-danger-style ml-2",title:"Delete"},[...t[24]||(t[24]=[e("i",{class:"fas exclude-icon fa-trash trash-icon"},null,-1)])],8,Ae)]),e("td",null,[e("div",Ie,[c(m(de),{filter:"",modelValue:i.category,"onUpdate:modelValue":n=>i.category=n,options:Q.value.categories,optionLabel:"title",optionValue:"id",placeholder:"",checkmark:"",highlightOnSelect:!1,class:"w-full md:w-56"},null,8,["modelValue","onUpdate:modelValue","options"]),t[25]||(t[25]=e("input",{value:"Direct Factoring Projection",disabled:"",class:"form-control min-width-300 text-left mt-2",type:"text"},null,-1))])]),e("td",null,[c(m(g),{modelValue:i.margin_rate,"onUpdate:modelValue":n=>i.margin_rate=n,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),(a(!0),s(f,null,h(v.value,(n,p)=>(a(),s(f,{key:p},[b.value.directFactoringBreakdownsRef.includes(p)?u("",!0):(a(),s("td",et,[e("div",tt,[e("div",lt,[c(m(g),{modelValue:i.percentage_payload[p],"onUpdate:modelValue":k=>i.percentage_payload[p]=k,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:k=>T(i.percentage_payload,p,v.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,st)]),c(m(g),{"model-value":I.value[l][p],disabled:"",min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["model-value"])])])),d.value.includes(p)&&d.value.length>1?(a(),s("td",at,[c(m(g),{modelValue:j.value.subRowTotals[l].per_year[p],"onUpdate:modelValue":k=>j.value.subRowTotals[l].per_year[p]=k,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[26]||(t[26]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[c(m(g),{modelValue:j.value.subRowTotals[l].total,"onUpdate:modelValue":n=>j.value.subRowTotals[l].total=n,min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[27]||(t[27]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])],8,ze))],64))),128))])]),e("div",it,[e("div",nt,[e("input",{onClick:t[3]||(t[3]=i=>le("directFactoringBreakdowns")),type:"button",class:"btn btn-primary btn-sm text-white",value:"Add New"})])])])],512),[[S,x.value.directFactoringBreakdown]])])]),e("div",ot,[e("div",rt,[e("div",ut,[t[28]||(t[28]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Administration Fees Rate & ECL Rate ")])],-1)),e("div",dt,[e("div",ct,[e("div",{onClick:t[4]||(t[4]=i=>x.value.feesRates=!x.value.feesRates),class:"btn show-hide-style"}," Show/Hide ")])]),t[29]||(t[29]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),L(e("div",mt,[e("div",ft,[e("table",vt,[e("thead",null,[e("tr",null,[t[30]||(t[30]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Item ",-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s("th",{key:l,class:"form-label font-weight-bold text-center align-middle header-border-down"},[e("span",pt,D(i),1)]))),128))])]),e("tbody",null,[r.value.admin_fees?(a(),s("tr",gt,[t[31]||(t[31]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Administration Fees Rate",disabled:"",class:"form-control min-width-hover-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s("td",{key:l},[e("div",bt,[c(m(g),{modelValue:r.value.admin_fees[l],"onUpdate:modelValue":n=>r.value.admin_fees[l]=n,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.admin_fees,l,v.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,yt)])]))),128))])):u("",!0),r.value.admin_fees?(a(),s("tr",ht,[t[32]||(t[32]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Expected Credit Loss Rate (ECL %)",disabled:"",class:"form-control min-width-hover-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s("td",{key:l},[e("div",_t,[c(m(g),{modelValue:r.value.ecl_rates[l],"onUpdate:modelValue":n=>r.value.ecl_rates[l]=n,min:0,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.ecl_rates,l,v.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,wt)])]))),128))])):u("",!0)])])])],512),[[S,x.value.feesRates]])])]),e("div",xt,[e("div",kt,[e("div",Ft,[e("div",Vt,[e("div",Rt,[R.value?u("",!0):(a(),s("button",{key:0,onClick:z,disabled:F.value,"data-button-value":"calculate-net-disbursement",type:"submit",class:"btn btn-danger text-white font-weight-bold"},[F.value&&r.value.submit_button=="calculate-net-disbursement"?(a(),s("span",Tt)):u("",!0),e("span",{class:"text-lg","data-button-value":"calculate-net-disbursement",innerHTML:F.value&&r.value.submit_button=="calculate-net-disbursement"?"Calculating...":"Calculate Net Disbursement"},null,8,Ct)],8,Dt))])])])])]),X.value?(a(),s("div",Pt,[e("div",Et,[e("div",jt,[t[33]||(t[33]=e("div",{class:"col-md-11"},[e("div",{class:"d-flex align-items-center"},[e("h3",{class:"font-weight-bold form-label kt-subheader__title small-caps"}," Factoring New Portfolio Funding Structure ")])],-1)),e("div",Ut,[e("div",Lt,[e("div",{onClick:t[5]||(t[5]=i=>x.value.fundingStructure=!x.value.fundingStructure),class:"btn show-hide-style"}," Show/Hide ")])]),t[34]||(t[34]=e("div",{class:"col-md-12"},[e("hr",{style:{"background-color":"lightgray"}})],-1))]),L(e("div",St,[e("div",Bt,[e("table",qt,[e("thead",null,[e("tr",null,[t[37]||(t[37]=e("th",{class:"form-label font-weight-bold text-center align-middle header-border-down first-column-th-class"}," Item ",-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s(f,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("th",$t,[e("span",Gt,D(i),1)])),d.value.length>1&&d.value.includes(l)?(a(),s("th",Nt,[e("div",Ot,[e("span",Mt,[t[35]||(t[35]=V("Total Yr. ",-1)),t[36]||(t[36]=e("br",null,null,-1)),V(" "+D(q.value[l]),1)]),e("i",{onClick:n=>$("fundingTableRef",l),title:"Expand / Collapse",class:"cursor-pointer fa fa-expand-arrows-alt text-primary exclude-icon"},null,8,Ht)])])):u("",!0)],64))),128)),t[38]||(t[38]=e("th",{class:"form-label expandable-th-amount-input font-weight-bold text-center align-middle header-border-down"},[e("div",{class:"d-flex flex-column align-items-center",style:{gap:"10px"}},[e("span",{class:""},[V("Total "),e("br")])])],-1))])]),e("tbody",null,[e("tr",Yt,[t[39]||(t[39]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Direct Factoring New Portfolio Amounts",disabled:"",class:"form-control min-width-hover-300 text-left mt-3",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s(f,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",Kt,[e("div",Xt,[c(m(g),{modelValue:r.value.netDisbursements[l],"onUpdate:modelValue":n=>r.value.netDisbursements[l]=n,min:0,disabled:"","input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"])])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",Zt,[c(m(g),{min:0,"input-class":"text-center",modelValue:O.value?.subRowTotals?.per_year?.[l],minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])):u("",!0)],64))),128)),e("td",null,[c(m(g),{min:0,"input-class":"text-center",modelValue:O.value?.subRowTotals?.total,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])]),e("tr",Qt,[t[42]||(t[42]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Equity Funding Rate (%)",disabled:"",class:"form-control min-width-hover-300 text-left mt-2",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s(f,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",Wt,[e("div",zt,[c(m(g),{modelValue:r.value.equity_funding_rates[l],"onUpdate:modelValue":n=>r.value.equity_funding_rates[l]=n,min:0,max:100,"input-class":"text-center",minFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.equity_funding_rates,l,v.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,8,Jt)])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",At,[c(m(J),{value:"-",pt:{root:{class:"text-center"}},disabled:"",fluid:""}),t[40]||(t[40]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[c(m(g),{min:0,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""}),t[41]||(t[41]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])]),e("tr",It,[t[43]||(t[43]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"Equity Funding Value",disabled:"",class:"form-control min-width-hover-300 text-left mt-3",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s(f,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",el,[e("div",tl,[c(m(g),{modelValue:M.value[l],"onUpdate:modelValue":n=>M.value[l]=n,min:0,disabled:"","input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"])])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",ll,[c(m(g),{min:0,"input-class":"text-center",modelValue:H.value.per_year[l],minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])):u("",!0)],64))),128)),e("td",null,[c(m(g),{min:0,"input-class":"text-center",modelValue:H.value.total,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"])])]),e("tr",sl,[t[46]||(t[46]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start"},[e("input",{value:"New Loans Funding Rate (%)",disabled:"",class:"form-control min-width-hover-300 text-left mt-3",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s(f,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",al,[e("div",il,[c(m(g),{modelValue:Y.value[l],"onUpdate:modelValue":n=>Y.value[l]=n,min:0,disabled:"","input-class":"text-center",minFractionDigits:2,maxFractionDigits:2,suffix:" %",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),e("i",{onClick:n=>T(r.value.equity_funding_rates,l,v.value),class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right",style:{visibility:"hidden"}},null,8,nl)])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",ol,[c(m(J),{value:"-",pt:{root:{class:"text-center"}},disabled:"",fluid:""}),t[44]||(t[44]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[c(m(g),{min:0,minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""}),t[45]||(t[45]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])]),e("tr",rl,[t[50]||(t[50]=e("td",null,[e("div",{class:"d-flex flex-column align-items-start mt-3"},[e("input",{value:"New Loans Funding Value",disabled:"",class:"form-control min-width-hover-300 text-left",type:"text"}),e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"})])],-1)),(a(!0),s(f,null,h(v.value,(i,l)=>(a(),s(f,{key:l},[b.value.fundingTableRef.includes(l)?u("",!0):(a(),s("td",ul,[e("div",dl,[c(m(g),{modelValue:K.value[l],"onUpdate:modelValue":n=>K.value[l]=n,min:0,disabled:"","input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",fluid:""},null,8,["modelValue","onUpdate:modelValue"]),t[47]||(t[47]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h row-repeater-icon cursor-pointer",title:"Repeat Right"},null,-1))])])),d.value.length>1&&d.value.includes(l)?(a(),s("td",cl,[c(m(g),{min:0,"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,modelValue:N.value.per_year[l],suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"]),t[48]||(t[48]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])):u("",!0)],64))),128)),e("td",null,[e("div",ml,[c(m(g),{min:0,modelValue:N.value.total,"onUpdate:modelValue":t[6]||(t[6]=i=>N.value.total=i),"input-class":"text-center",minFractionDigits:0,maxFractionDigits:2,suffix:" EGP",disabled:"",fluid:""},null,8,["modelValue"]),t[49]||(t[49]=e("i",{style:{visibility:"hidden"},class:"fa fa-ellipsis-h"},null,-1))])])])])])])],512),[[S,x.value.fundingStructure]])])])):u("",!0),e("div",fl,[e("div",vl,[R.value?u("",!0):(a(),s("button",{key:0,onClick:z,disabled:F.value,"data-button-value":"save-and-go-to-next-value",type:"submit",class:"btn text-white active-style save-form"},[F.value&&r.value.submit_button=="save-and-go-to-next-value"?(a(),s("span",gl)):u("",!0),e("span",{class:"text-lg","data-button-value":"save-and-go-to-next-value",innerHTML:F.value&&r.value.submit_button=="save-and-go-to-next-value"?"Saving...":"Save & Go To Next"},null,8,bl)],8,pl))])])]))}},hl=oe(yl,[["__scopeId","data-v-9d207246"]]),B=ce(hl);B.component("VueDatePicker",me);B.config.globalProperties.$swal=fe;B.config.globalProperties.$helper=E;B.use(ve,{theme:{preset:pe}}).mount("#app-direct-factoring");
